<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clima Actual - Tomorrow.io</title>
</head>
<body>
    <h1>Datos Meteorológicos Actuales</h1>
    <p><strong>Temperatura:</strong> <span id="temp">Cargando...</span></p>
    <p><strong>Descripción del Clima:</strong> <span id="description">Cargando...</span></p>
    <p><strong>Porcentaje de Nubosidad:</strong> <span id="cloudCover">Cargando...</span></p>

    <script>
        const apiKey = '68OZC7L4oCjPx7R7r7oNhLb7tK8i3Z2f';  // Reemplaza con tu API Key de Tomorrow.io
        const latitud = 4.60971;  // Latitud de Bogotá
        const longitud = -74.08175;  // Longitud de Bogotá
        const url = `https://api.tomorrow.io/v4/timelines?location=${latitud},${longitud}&fields=temperature,cloudCover,weatherCode&timesteps=current&units=metric&apikey=${apiKey}`;

        // Función para obtener el clima directamente desde la API
        async function obtenerClima() {
            try {
                const response = await fetch(url);
                const data = await response.json();
                const clima = data.data.timelines[0].intervals[0].values;

                // Actualizar la interfaz con los datos recibidos de la API
                document.getElementById('temp').innerText = `${clima.temperature} °C`;
                document.getElementById('description').innerText = obtenerDescripcionClima(clima.weatherCode);
                document.getElementById('cloudCover').innerText = `${clima.cloudCover}%`;

            } catch (error) {
                console.error('Error al obtener los datos del clima:', error);
            }
        }

        // Función para obtener la descripción del clima basado en weatherCode
        function obtenerDescripcionClima(weatherCode) {
            const descripciones = {
                1000: 'Despejado',
                1100: 'Mayormente despejado',
                1101: 'Parcialmente nublado',
                1102: 'Mayormente nublado',
                2000: 'Niebla',
                2100: 'Niebla ligera',
                3000: 'Viento',
                3001: 'Viento ligero',
                3002: 'Viento fuerte',
                4000: 'Lluvia ligera',
                4200: 'Lluvia',
                5001: 'Nieve ligera',
                5100: 'Nieve',
                6000: 'Llovizna helada',
                6200: 'Lluvia helada',
                7000: 'Tormenta',
                // Agrega más códigos según lo necesites
            };

            return descripciones[weatherCode] || 'Clima desconocido';
        }

        // Llamar a la función para obtener el clima al cargar la página
        obtenerClima();
    </script>
</body>
</html>
